

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>IntradayDataHandler &mdash; QF Lib  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TimeEvent" href="qf_lib.backtesting.events.time_event.time_event.TimeEvent.html" />
    <link rel="prev" title="DailyDataHandler" href="qf_lib.backtesting.data_handler.daily_data_handler.DailyDataHandler.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> QF Lib
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../analysis.html">analysis</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../backtesting.html">backtesting</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#alpha-model">alpha_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#contract">contract</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../backtesting.html#data-handler">data_handler</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="qf_lib.backtesting.data_handler.data_handler.DataHandler.html">DataHandler</a></li>
<li class="toctree-l3"><a class="reference internal" href="qf_lib.backtesting.data_handler.daily_data_handler.DailyDataHandler.html">DailyDataHandler</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">IntradayDataHandler</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#events">events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#execution-handler">execution_handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#fast-alpha-model-tester">fast_alpha_model_tester</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#monitoring">monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#order">order</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#portfolio">portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#position-sizer">position_sizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#signals">signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting.html#trading-session">trading_session</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../common.html">common</a></li>
<li class="toctree-l1"><a class="reference internal" href="../containers.html">containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_providers.html">data_providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../document_utils.html">document_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting.html">plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indicators.html">indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../portfolio_construction.html">portfolio_construction</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QF Lib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../backtesting.html">backtesting</a> &raquo;</li>
        
      <li>IntradayDataHandler</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="intradaydatahandler">
<h1>IntradayDataHandler<a class="headerlink" href="#intradaydatahandler" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler">
<em class="property">class </em><code class="sig-prename descclassname">qf_lib.backtesting.data_handler.intraday_data_handler.</code><code class="sig-name descname">IntradayDataHandler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_provider</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.data_providers.data_provider.DataProvider.html#qf_lib.data_providers.data_provider.DataProvider" title="qf_lib.data_providers.data_provider.DataProvider">qf_lib.data_providers.data_provider.DataProvider</a></span></em>, <em class="sig-param"><span class="n">timer</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.utils.dateutils.timer.Timer.html#qf_lib.common.utils.dateutils.timer.Timer" title="qf_lib.common.utils.dateutils.timer.Timer">qf_lib.common.utils.dateutils.timer.Timer</a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="qf_lib.backtesting.data_handler.data_handler.DataHandler.html#qf_lib.backtesting.data_handler.data_handler.DataHandler" title="qf_lib.backtesting.data_handler.data_handler.DataHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">qf_lib.backtesting.data_handler.data_handler.DataHandler</span></code></a></p>
<p><strong>Methods</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_current_bar" title="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_current_bar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_current_bar</span></code></a>(tickers, …)</p></td>
<td><p>Gets the current bar(s) for given Ticker(s).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_current_price" title="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_current_price"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_current_price</span></code></a>(tickers, …)</p></td>
<td><p>Works just like get_last_available_price() but it can return NaNs if data is not available at the current moment (e.g.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_history" title="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_history"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_history</span></code></a>(tickers, …)</p></td>
<td><p>Runs DataProvider.get_history(…) but before makes sure that the query doesn’t concern data from the future.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_last_available_price" title="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_last_available_price"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_last_available_price</span></code></a>(tickers, …)</p></td>
<td><p>Gets the latest available price for given assets, even if the full bar is not yet available.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_price" title="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_price"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_price</span></code></a>(tickers, …)</p></td>
<td><p>Acceses prices, using the DataProvider get_price functionality, but before makes sure that the query doesn’t concern data from the future.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.historical_price" title="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.historical_price"><code class="xref py py-obj docutils literal notranslate"><span class="pre">historical_price</span></code></a>(tickers, …)</p></td>
<td><p>Returns the latest available data samples.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_current_bar">
<code class="sig-name descname">get_current_bar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tickers</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">, </span>Sequence<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="qf_lib.containers.series.qf_series.QFSeries.html#qf_lib.containers.series.qf_series.QFSeries" title="qf_lib.containers.series.qf_series.QFSeries">qf_lib.containers.series.qf_series.QFSeries</a><span class="p">, </span><a class="reference internal" href="qf_lib.containers.dataframe.qf_dataframe.QFDataFrame.html#qf_lib.containers.dataframe.qf_dataframe.QFDataFrame" title="qf_lib.containers.dataframe.qf_dataframe.QFDataFrame">qf_lib.containers.dataframe.qf_dataframe.QFDataFrame</a><span class="p">]</span><a class="headerlink" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_current_bar" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the current bar(s) for given Ticker(s). If the bar is not available yet, None is returned.</p>
<p>If the request for single Ticker was made, then the result is a QFSeries indexed with PriceFields (OHLCV).
If the request for multiple Tickers was made, then the result has Tickers as an index and PriceFields
as columns.</p>
<p>In case of N minutes frequency, the current bar can be returned in the time between (inclusive) N minutes
after MarketOpenEvent and the MarketCloseEvent).</p>
<p>E.g. for 1 minute frequency, at 13:00 (if the market opens before 13:00), the 12:59 - 13:00 bar will be
returned. In case of 15 minutes frequency, when the market opened less then 15 minutes ago, Nones will be
returned. If current time (“now”) contains non-zero seconds or microseconds, Nones will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tickers</strong> (<a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker"><em>Ticker</em></a><em>, </em><em>Sequence</em><em>[</em><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker"><em>Ticker</em></a><em>]</em>) – tickers of the securities which prices should be downloaded</p></li>
<li><p><strong>frequency</strong> (<a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency"><em>Frequency</em></a>) – frequency of the data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>current bar</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="qf_lib.containers.series.qf_series.QFSeries.html#qf_lib.containers.series.qf_series.QFSeries" title="qf_lib.containers.series.qf_series.QFSeries">QFSeries</a>, <a class="reference internal" href="qf_lib.containers.dataframe.qf_dataframe.QFDataFrame.html#qf_lib.containers.dataframe.qf_dataframe.QFDataFrame" title="qf_lib.containers.dataframe.qf_dataframe.QFDataFrame">QFDataFrame</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_current_price">
<code class="sig-name descname">get_current_price</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tickers</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">, </span>Sequence<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>float<span class="p">, </span><a class="reference internal" href="qf_lib.containers.series.qf_series.QFSeries.html#qf_lib.containers.series.qf_series.QFSeries" title="qf_lib.containers.series.qf_series.QFSeries">qf_lib.containers.series.qf_series.QFSeries</a><span class="p">]</span><a class="headerlink" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_current_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Works just like get_last_available_price() but it can return NaNs if data is not available at the current
moment (e.g. it returns NaN on a non-trading day).</p>
<p>The frequency parameter is always casted into 1 minute frequency, to represent the most recent price.</p>
<p>If the frequency parameter is an intraday frequency, the CLOSE price of the currently available bar will be
returned.
E.g. for 1 minute frequency, at 13:00 (if the market opens before 13:00), the CLOSE price of the
12:59 - 13:00 bar will be returned.
If “now” contains non-zero seconds or microseconds, None will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tickers</strong> (<a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker"><em>Ticker</em></a><em>, </em><em>Sequence</em><em>[</em><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker"><em>Ticker</em></a><em>]</em>) – tickers of the securities which prices should be downloaded</p></li>
<li><p><strong>frequency</strong> (<a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency"><em>Frequency</em></a>) – frequency of the data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>current_prices series where:
- current_prices.name contains a date of current prices,
- current_prices.index contains tickers
- current_prices.data contains latest available prices for given tickers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float, <a class="reference internal" href="qf_lib.containers.series.qf_series.QFSeries.html#qf_lib.containers.series.qf_series.QFSeries" title="qf_lib.containers.series.qf_series.QFSeries">QFSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_history">
<code class="sig-name descname">get_history</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tickers</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">, </span>Sequence<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">fields</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>Sequence<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">start_date</span><span class="p">:</span> <span class="n">datetime.datetime</span></em>, <em class="sig-param"><span class="n">end_date</span><span class="p">:</span> <span class="n">datetime.datetime</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="qf_lib.containers.series.qf_series.QFSeries.html#qf_lib.containers.series.qf_series.QFSeries" title="qf_lib.containers.series.qf_series.QFSeries">qf_lib.containers.series.qf_series.QFSeries</a><span class="p">, </span><a class="reference internal" href="qf_lib.containers.dataframe.qf_dataframe.QFDataFrame.html#qf_lib.containers.dataframe.qf_dataframe.QFDataFrame" title="qf_lib.containers.dataframe.qf_dataframe.QFDataFrame">qf_lib.containers.dataframe.qf_dataframe.QFDataFrame</a><span class="p">, </span><a class="reference internal" href="qf_lib.containers.qf_data_array.QFDataArray.html#qf_lib.containers.qf_data_array.QFDataArray" title="qf_lib.containers.qf_data_array.QFDataArray">qf_lib.containers.qf_data_array.QFDataArray</a><span class="p">]</span><a class="headerlink" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs DataProvider.get_history(…) but before makes sure that the query doesn’t concern data from the future.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataProvider.get_history()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_last_available_price">
<code class="sig-name descname">get_last_available_price</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tickers</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">, </span>Sequence<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>float<span class="p">, </span><a class="reference internal" href="qf_lib.containers.series.qf_series.QFSeries.html#qf_lib.containers.series.qf_series.QFSeries" title="qf_lib.containers.series.qf_series.QFSeries">qf_lib.containers.series.qf_series.QFSeries</a><span class="p">]</span><a class="headerlink" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_last_available_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the latest available price for given assets, even if the full bar is not yet available.</p>
<p>The frequency parameter is always casted into 1 minute frequency, to represent the most recent price.</p>
<p>It returns the CLOSE price of the last available bar. If “now” is after the market OPEN, and before the market
CLOSE, the last available price is equal to the current price (CLOSE price of the bar, which right bound is
equal to “now”). If the market did not open yet, the last available CLOSE price will be returned.
Non-zero seconds or microseconds values are omitted (e.g. 13:40:01 is always treated as 13:40:00).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tickers</strong> (<a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker"><em>Ticker</em></a><em>, </em><em>Sequence</em><em>[</em><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker"><em>Ticker</em></a><em>]</em>) – tickers of the securities which prices should be downloaded</p></li>
<li><p><strong>frequency</strong> (<a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency"><em>Frequency</em></a>) – frequency of the data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>last_prices series where:
- last_prices.name contains a date of current prices,
- last_prices.index contains tickers
- last_prices.data contains latest available prices for given tickers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float, <a class="reference internal" href="qf_lib.containers.series.qf_series.QFSeries.html#qf_lib.containers.series.qf_series.QFSeries" title="qf_lib.containers.series.qf_series.QFSeries">QFSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_price">
<code class="sig-name descname">get_price</code><span class="sig-paren">(</span><em class="sig-param">tickers: Union[qf_lib.common.tickers.tickers.Ticker, Sequence[qf_lib.common.tickers.tickers.Ticker]], fields: Union[qf_lib.common.enums.price_field.PriceField, Sequence[qf_lib.common.enums.price_field.PriceField]], start_date: datetime.datetime, end_date: datetime.datetime = None, frequency: qf_lib.common.enums.frequency.Frequency = &lt;Frequency.DAILY: 252&gt;</em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="qf_lib.containers.series.prices_series.PricesSeries.html#qf_lib.containers.series.prices_series.PricesSeries" title="qf_lib.containers.series.prices_series.PricesSeries">qf_lib.containers.series.prices_series.PricesSeries</a><span class="p">, </span><a class="reference internal" href="qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame.html#qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame" title="qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame">qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame</a><span class="p">, </span><a class="reference internal" href="qf_lib.containers.qf_data_array.QFDataArray.html#qf_lib.containers.qf_data_array.QFDataArray" title="qf_lib.containers.qf_data_array.QFDataArray">qf_lib.containers.qf_data_array.QFDataArray</a><span class="p">]</span><a class="headerlink" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.get_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Acceses prices, using the DataProvider get_price functionality, but before makes sure that the query doesn’t
concern data from the future.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataProvider.get_price()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.historical_price">
<code class="sig-name descname">historical_price</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tickers</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">, </span>Sequence<span class="p">[</span><a class="reference internal" href="qf_lib.common.tickers.tickers.Ticker.html#qf_lib.common.tickers.tickers.Ticker" title="qf_lib.common.tickers.tickers.Ticker">qf_lib.common.tickers.tickers.Ticker</a><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">fields</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="qf_lib.common.enums.price_field.PriceField.html#qf_lib.common.enums.price_field.PriceField" title="qf_lib.common.enums.price_field.PriceField">qf_lib.common.enums.price_field.PriceField</a><span class="p">, </span>Sequence<span class="p">[</span><a class="reference internal" href="qf_lib.common.enums.price_field.PriceField.html#qf_lib.common.enums.price_field.PriceField" title="qf_lib.common.enums.price_field.PriceField">qf_lib.common.enums.price_field.PriceField</a><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">nr_of_bars</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">frequency</span><span class="p">:</span> <span class="n"><a class="reference internal" href="qf_lib.common.enums.frequency.Frequency.html#qf_lib.common.enums.frequency.Frequency" title="qf_lib.common.enums.frequency.Frequency">qf_lib.common.enums.frequency.Frequency</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="qf_lib.containers.series.prices_series.PricesSeries.html#qf_lib.containers.series.prices_series.PricesSeries" title="qf_lib.containers.series.prices_series.PricesSeries">qf_lib.containers.series.prices_series.PricesSeries</a><span class="p">, </span><a class="reference internal" href="qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame.html#qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame" title="qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame">qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame</a><span class="p">, </span><a class="reference internal" href="qf_lib.containers.qf_data_array.QFDataArray.html#qf_lib.containers.qf_data_array.QFDataArray" title="qf_lib.containers.qf_data_array.QFDataArray">qf_lib.containers.qf_data_array.QFDataArray</a><span class="p">]</span><a class="headerlink" href="#qf_lib.backtesting.data_handler.intraday_data_handler.IntradayDataHandler.historical_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the latest available data samples. In case of N minutes frequency, the most recent data may not
represent exactly N minutes (if the whole bar was not available at this time). The time ranges are always
aligned to the market open time.</p>
<p>E.g. In case of market open time equal to 10:30, the historical_price at 11:05 with frequency set to
15 minutes and 3 bars, the data samples corresponding to the following bars will be returned:
10:30 - 10:45  (inclusive; full 15 minutes bar)
10:45 - 11:00
11:00 - 11:05  (inclusive; only 5 minutes bar)
The series is indexed with the open time (left side of the time range).</p>
<p>Non-zero seconds and microseconds are in the above case omitted (the output at 11:05:10 will be exactly
the same as at 11:05).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tickers</strong> – ticker or sequence of tickers of the securities</p></li>
<li><p><strong>fields</strong> – PriceField or sequence of PriceFields of the securities</p></li>
<li><p><strong>nr_of_bars</strong> – number of data samples (bars) to be returned.
Note: while requesting more than one ticker, some tickers may have fewer than n_of_bars data points</p></li>
<li><p><strong>frequency</strong> – frequency of the data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="qf_lib.containers.series.prices_series.PricesSeries.html#qf_lib.containers.series.prices_series.PricesSeries" title="qf_lib.containers.series.prices_series.PricesSeries">PricesSeries</a>, <a class="reference internal" href="qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame.html#qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame" title="qf_lib.containers.dataframe.prices_dataframe.PricesDataFrame">PricesDataFrame</a>, <a class="reference internal" href="qf_lib.containers.qf_data_array.QFDataArray.html#qf_lib.containers.qf_data_array.QFDataArray" title="qf_lib.containers.qf_data_array.QFDataArray">QFDataArray</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="qf_lib.backtesting.events.time_event.time_event.TimeEvent.html" class="btn btn-neutral float-right" title="TimeEvent" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="qf_lib.backtesting.data_handler.daily_data_handler.DailyDataHandler.html" class="btn btn-neutral float-left" title="DailyDataHandler" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>